{% extends '../base.html' %}
{% block content %}

    <div class="row" id="upload_outer_div">
        <div class="col-md-12" style="text-align: center;">
            <h2 class="tagline">No matter where you go â€“ <br>take your files with you</h2>
            <form action="{% url 'upload' %}" method="post" id="form_upload" enctype="multipart/form-data">
                {% csrf_token %}
                <div class="button" id="upload_btn">Upload</div>
                <input type="file" name="file" id="getFile" autocomplete=off
                       multiple/>
                <input type="hidden" id="Hiddate" name="csrfmiddlewaretoken" value="{% csrf_token %}"/>
                <button type="submit">submit</button>
            </form>
            <div id="progressBar"
                 style="width:100%;height:60px;margin-top: 20px;"
                 data-preset="rainbow">
            </div>
        </div>

        {#        {% if file %}#}
        {#            <script>#}
        {#                $(document).ready(function () {#}
        {#                    $.dialog({#}
        {#                        backgroundDismiss: false,#}
        {#                        boxWidth: '300px',#}
        {#                        icon: 'fas fa-file-download',#}
        {#                        useBootstrap: false,#}
        {#                        animation: 'top',#}
        {#                        title: 'Download',#}
        {#                        content: '' +#}
        {#                        '<div class="form-group" style="padding-top: 10px;">' +#}
        {#                        {% for f in file.all %}#}
        {#                            '<p><a href="media/{{ f.0 }}" download>{{ f.1 }}</a></p>'+#}
        {#                            '<hr>'+#}
        {#                        {% endfor %}#}
        {#                        '</div>',#}
        {#                    });#}
        {#                });#}
        {#            </script>#}
        {#        {% endif %}#}
        {% if data %}
            <script>
                $(document).ready(function () {
                    {% if data == "Wrong" %}
                        $.dialog({
                            backgroundDismiss: false,
                            boxWidth: '300px',
                            icon: 'fas fa-ghost',
                            useBootstrap: false,
                            animation: 'top',
                            title: 'Not Found',
                            content: '' +
                            '<div class="form-group" style="padding-top: 10px;text-align: center;">' +
                            '<b>Key not found</b>' +
                            '</div>',
                        });
                    {% else %}
                        {% if data == "Download"%}
                            alert('download')
                        {% else %}
                            $.confirm({
                                backgroundDismiss: false,
                                boxWidth: '300px',
                                icon: 'fas fa-key',
                                useBootstrap: false,
                                animation: 'top',
                                title: 'Password',
                                content: '' +
                                '<form action="" class="formName">' +
                                '<div class="form-group">' +
                                // '<label>enter password</label>' +
                                '<input type="password" placeholder="enter password" class="name form-control" style="margin-top:10px" required />' +
                                '</div>' +
                                '</form>',
                                buttons: {
                                    formSubmit: {
                                        text: 'Submit',
                                        btnClass: 'btn btn-primary btn-lg',
                                        action: function () {
                                            var name = this.$content.find('.name').val();
                                            if (!name) {
                                                $.alert('provide a valid name');
                                                return false;
                                            }
                                            $.alert('Your name is ' + name);
                                        }
                                    },
                                    close: {
                                        text: 'Close',

                                        action: function () {
                                            window.location.href = '/';
                                        }
                                    },
                                },
                            });

                        {% endif %}
                    {% endif %}
                });
            </script>
        {% endif %}

    </div>

{% endblock %}
